---
title: Native Crypto
description: Use native crypto for maximum performance in Bun and Node.
---

Native crypto provides the fastest signing and hashing operations by using Rust bindings via FFI. This is recommended for backend services and CLI tools.

## Bun (Native Entrypoint)

Use the explicit native entrypoint in Bun. No additional setup required.

```typescript
import { isNativeAvailable } from 'kundera-sn/native';

console.log('Native available:', isNativeAvailable());
// true in Bun
```

<Tip>
Bun's FFI is the fastest option. If you're building a backend service, Bun is recommended.
</Tip>

## Node.js with ffi-napi

Node.js requires the `ffi-napi` package for native crypto:

```bash
npm install ffi-napi
```

Then use the native entrypoint:

```typescript
import { isNativeAvailable } from 'kundera-sn/native';

console.log('Native available:', isNativeAvailable());
// true if ffi-napi is installed
```

<Warning>
## Native Dependencies

`ffi-napi` requires native build tools:

**macOS:**
```bash
xcode-select --install
```

**Linux (Ubuntu/Debian):**
```bash
sudo apt-get install build-essential
```

**Windows:**
```bash
npm install --global windows-build-tools
```
</Warning>

## Library Path

Kundera looks for the native library (`libkundera_crypto.dylib`, `.so`, or `.dll`) in these locations:

1. `KUNDERA_NATIVE_LIB` environment variable
2. Adjacent to the package: `node_modules/kundera-sn/native/`
3. System library paths

To specify a custom path:

```bash
export KUNDERA_NATIVE_LIB=/path/to/libkundera_crypto.dylib
```

## Need a Browser-Compatible Backend?

Use the WASM entrypoint instead:

```typescript
import { loadWasmCrypto } from 'kundera-sn/wasm';

await loadWasmCrypto();
```

## Performance

Native crypto avoids JavaScript overhead by calling Rust directly via FFI. This is the fastest option for backend services.

| Backend | Best For |
|---------|----------|
| Native (Bun) | Backend services, CLI tools |
| Native (Node) | Existing Node.js projects |
| WASM | Browsers, portable environments |

## Related

<CardGroup cols={2}>
  <Card title="WASM Crypto" icon="browser" href="/getting-started/wasm">
    Use WASM for browsers and portable environments.
  </Card>
  <Card title="Crypto API" icon="lock" href="/api/crypto">
    Cryptographic function reference.
  </Card>
</CardGroup>
