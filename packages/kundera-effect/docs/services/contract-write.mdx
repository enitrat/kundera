---
title: Contract Write Service
description: Write contract calls with ABI encoding + SignerService.
---

<Info>
ContractWriteService mirrors Voltaire’s “contract write” approach, adapted to Starknet accounts.
</Info>

# Contract Write Service

`ContractWriteService` composes `SignerService` and ABI helpers for state-changing calls.

## Imports

```ts
import { Effect } from "effect";
import { Services } from "kundera-effect";
```

## Live Layer

- `Services.ContractWrite.ContractWrite` (requires `SignerService`)

## Write a Contract Call

```ts
import erc20Abi from "./erc20.abi.json";

const program = Effect.gen(function* () {
  const writer = yield* Services.ContractWrite.ContractWriteService;
  return yield* writer.writeContract({
    abi: erc20Abi,
    address: "0x...",
    functionName: "transfer",
    args: ["0x...", 1n],
    resourceBounds: {
      l1_gas: { max_amount: 1_000_000n, max_price_per_unit: 1n },
      l2_gas: { max_amount: 1_000_000n, max_price_per_unit: 1n }
    }
  });
}).pipe(
  Effect.provide(Services.Presets.createHttpProvider("https://starknet.example.com")),
  Effect.provide(Services.Account.OpenZeppelinAccount({
    address: "0x...",
    privateKey: "0x..."
  })),
  Effect.provide(Services.Signer.Signer),
  Effect.provide(Services.ContractWrite.ContractWrite)
);
```

## Multicall

```ts
const program = Effect.gen(function* () {
  const writer = yield* Services.ContractWrite.ContractWriteService;
  const callA = yield* writer.buildCall({
    abi: erc20Abi,
    address: "0x...",
    functionName: "transfer",
    args: ["0x...", 1n]
  });
  const callB = yield* writer.buildCall({
    abi: erc20Abi,
    address: "0x...",
    functionName: "transfer",
    args: ["0x...", 2n]
  });

  return yield* writer.invoke({
    calls: [callA, callB],
    resourceBounds: {
      l1_gas: { max_amount: 1_000_000n, max_price_per_unit: 1n },
      l2_gas: { max_amount: 1_000_000n, max_price_per_unit: 1n }
    }
  });
});
```

## Errors

`ContractWriteService` surfaces `ContractWriteError` on ABI or signing failures.

## Related

<CardGroup cols={2}>
  <Card title="Contract Read" icon="eye" href="/services/contract">
    Read-only contract calls.
  </Card>
  <Card title="Signer" icon="signature" href="/services/signer">
    Sign and submit transactions.
  </Card>
</CardGroup>
