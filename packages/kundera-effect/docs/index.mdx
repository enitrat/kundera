---
title: @kundera-sn/kundera-effect
description: Effect-TS integration for type-safe, composable Starknet operations
---

# @kundera-sn/kundera-effect

**For production applications, we recommend @kundera-sn/kundera-effect** â€” Effect-TS integration with typed errors, dependency injection, and composable operations.

## Why Effect?

| Feature | Plain Kundera | @kundera-sn/kundera-effect |
|---------|---------------|----------------|
| Error handling | try/catch | Typed `Effect<A, E, R>` |
| Retries | Manual | `Effect.retry({ times: 3 })` |
| Timeouts | Manual | `Effect.timeout("10s")` |
| Composition | Promise chains | Effect generators |
| Testing | Mocks | Dependency injection |

## Quick Comparison

**Plain Kundera:**
```typescript
import { encodeCalldata } from '@kundera-sn/kundera-ts/abi';
import { starknet_call } from '@kundera-sn/kundera-ts/jsonrpc';

try {
  const address = '0x...';
  const encoded = encodeCalldata(abi, 'transfer', args);
  if (encoded.error) {
    throw encoded.error;
  }
  const result = await starknet_call(
    transport,
    {
      contract_address: address,
      entry_point_selector: '0x...',
      calldata: encoded.result
    },
    'latest'
  );
} catch (e) {
  // What kind of error? ABI? JSON-RPC? Network?
}
```

**@kundera-sn/kundera-effect:**
```typescript
import { Effect } from 'effect';
import * as Abi from '@kundera-sn/kundera-effect/abi';
import * as Rpc from '@kundera-sn/kundera-effect/jsonrpc';

const program = Effect.gen(function* () {
  const calldata = yield* Abi.encodeCalldata(abi, 'transfer', args);
  const result = yield* Rpc.starknet_call(transport, call, 'latest');
  return result;
}).pipe(
  Effect.retry({ times: 3 }),
  Effect.timeout('10 seconds'),
  Effect.catchTag('RpcError', (e) => Effect.succeed(fallback))
);
```

## Installation

```bash
npm install @kundera-sn/kundera-effect effect @kundera-sn/kundera-ts
```

## Modules

<CardGroup cols={2}>
  <Card title="Primitives" icon="cube" href="/primitives">
    Felt252, ContractAddress, ClassHash with Effect wrappers.
  </Card>
  <Card title="ABI" icon="code" href="/abi">
    Encode and decode calldata with typed AbiError.
  </Card>
  <Card title="Crypto" icon="lock" href="/crypto">
    Pedersen, Poseidon, signatures with CryptoError.
  </Card>
  <Card title="JSON-RPC" icon="network-wired" href="/jsonrpc">
    All JSON-RPC methods with RpcError handling.
  </Card>
  <Card title="Serde" icon="arrows-rotate" href="/serde">
    Cairo serialization with SerdeError.
  </Card>
  <Card title="Transport" icon="satellite" href="/transport">
    HTTP and WebSocket with TransportError.
  </Card>
  <Card title="Services" icon="layer-group" href="/services">
    Transport/Provider/RpcBatch layers with DI presets.
  </Card>
</CardGroup>

## Error Types

All operations return typed errors you can pattern match:

```typescript
import { Effect } from 'effect';

const program = myOperation.pipe(
  Effect.catchTags({
    PrimitiveError: (e) => /* handle invalid felt/address */,
    AbiError: (e) => /* handle encoding/decoding failure */,
    CryptoError: (e) => /* handle hash/signature failure */,
    RpcError: (e) => /* handle network/JSON-RPC failure */,
  })
);
```

## Full Documentation

See the [@kundera-sn/kundera-effect package](https://github.com/starknet/kundera/tree/master/packages/kundera-effect/docs) for complete API documentation.
