---
title: Wallet API
description: Browser wallet connection and event handling.
---

Connect to browser wallets like ArgentX and Braavos for user-facing applications.

## Imports

```typescript
import {
  // Connection
  connectWallet,
  disconnectWallet,
  // Event listeners
  onAccountChange,
  onNetworkChanged,
  // Types
  type WalletProviderType,
  type ConnectWalletOptions,
  type WalletConnection,
  type WalletError,
  type WalletErrorCode,
  type AccountChangeEvent,
  type NetworkChangeEvent,
  type AccountChangeCallback,
  type NetworkChangeCallback,
  type UnsubscribeFn,
} from 'kundera/wallet';
```

## Connection

### connectWallet

Connect to a browser wallet.

```typescript
function connectWallet(
  options?: ConnectWalletOptions
): Promise<{ result: WalletConnection | null; error: WalletError | null }>
```

```typescript
// Auto-detect available wallet
const { result, error } = await connectWallet();

if (error) {
  console.error('Connection failed:', error.message);
  return;
}

console.log('Connected:', result.address);
console.log('Chain:', result.chainId);
```

### Specify Wallet Type

```typescript
// Connect to specific wallet
const { result } = await connectWallet({
  wallet: 'argentX', // or 'braavos'
});
```

### disconnectWallet

Disconnect the current wallet.

```typescript
function disconnectWallet(): Promise<void>
```

```typescript
await disconnectWallet();
```

## Event Listeners

### onAccountChange

Listen for account changes (user switches accounts).

```typescript
function onAccountChange(
  callback: AccountChangeCallback
): UnsubscribeFn
```

```typescript
const unsubscribe = onAccountChange((event) => {
  console.log('Account changed:', event.address);
  // Update your app state
});

// Later: stop listening
unsubscribe();
```

### onNetworkChanged

Listen for network changes (user switches networks).

```typescript
function onNetworkChanged(
  callback: NetworkChangeCallback
): UnsubscribeFn
```

```typescript
const unsubscribe = onNetworkChanged((event) => {
  console.log('Network changed:', event.chainId);
  // Reconnect provider to new network
});
```

## Create Account from Wallet

Use `connectAccountFromWallet` to get a usable account:

```typescript
import { connectWallet } from 'kundera/wallet';
import { connectAccountFromWallet } from 'kundera/account';
import { createHttpProvider } from 'kundera/provider';

// 1. Connect wallet
const { result: connection } = await connectWallet();

// 2. Create provider for RPC calls
const provider = createHttpProvider({
  url: 'https://starknet-mainnet.public.blastapi.io',
});

// 3. Create account from wallet
const account = await connectAccountFromWallet(
  connection.provider,
  provider
);

// 4. Use account for transactions
await account.execute([...]);
```

## Types

### WalletProviderType

Available wallet types.

```typescript
type WalletProviderType = 'argentX' | 'braavos';
```

### ConnectWalletOptions

```typescript
interface ConnectWalletOptions {
  wallet?: WalletProviderType;
}
```

### WalletConnection

Successful connection result.

```typescript
interface WalletConnection {
  address: string;
  chainId: string;
  provider: StarknetWalletProvider;
}
```

### WalletError

```typescript
interface WalletError {
  code: WalletErrorCode;
  message: string;
}
```

### WalletErrorCode

```typescript
type WalletErrorCode =
  | 'WALLET_NOT_FOUND'
  | 'CONNECTION_REJECTED'
  | 'CONNECTION_ERROR';
```

### AccountChangeEvent

```typescript
interface AccountChangeEvent {
  address: string;
}
```

### NetworkChangeEvent

```typescript
interface NetworkChangeEvent {
  chainId: string;
}
```

### UnsubscribeFn

```typescript
type UnsubscribeFn = () => void;
```

## React Example

```tsx
import { useState, useEffect } from 'react';
import { connectWallet, onAccountChange, disconnectWallet } from 'kundera/wallet';

function WalletButton() {
  const [address, setAddress] = useState<string | null>(null);

  useEffect(() => {
    // Listen for account changes
    return onAccountChange((event) => {
      setAddress(event.address);
    });
  }, []);

  const connect = async () => {
    const { result, error } = await connectWallet();
    if (result) {
      setAddress(result.address);
    } else {
      console.error(error?.message);
    }
  };

  const disconnect = async () => {
    await disconnectWallet();
    setAddress(null);
  };

  if (address) {
    return (
      <div>
        <span>{address.slice(0, 6)}...{address.slice(-4)}</span>
        <button onClick={disconnect}>Disconnect</button>
      </div>
    );
  }

  return <button onClick={connect}>Connect Wallet</button>;
}
```

<Warning>
## Browser Only

Wallet connection requires `window.starknet`. These APIs only work in browser environments, not Node.js or server-side.
</Warning>

## Wallet Detection

Check if wallets are available:

```typescript
// Check if any Starknet wallet is installed
const hasWallet = typeof window !== 'undefined' && window.starknet;

// Check specific wallet
const hasArgent = typeof window !== 'undefined' && window.starknet_argentX;
const hasBraavos = typeof window !== 'undefined' && window.starknet_braavos;
```

## Related

<CardGroup cols={2}>
  <Card title="Wallet Connect Guide" icon="wallet" href="/guides/account/wallet-connect">
    Detailed wallet connection guide.
  </Card>
  <Card title="Account API" icon="user" href="/api/account">
    Account creation and management.
  </Card>
</CardGroup>
