---
title: Provider API
description: HTTP and WebSocket provider classes and factories.
---

Providers handle JSON-RPC communication with Starknet nodes.

## Imports

```typescript
import {
  // Classes
  HttpProvider,
  WebSocketProvider,
  TypedProvider,
  // Factories
  createHttpProvider,
  createTypedProvider,
  mainnetProvider,
  sepoliaProvider,
  // Types
  type Provider,
  type HttpProviderOptions,
  type WebSocketProviderOptions,
} from 'kundera/provider';
```

## Factories

### createHttpProvider

Creates an HTTP provider instance.

```typescript
function createHttpProvider(options: HttpProviderOptions | string): HttpProvider
```

```typescript
// With URL string
const provider = createHttpProvider('https://starknet-mainnet.public.blastapi.io');

// With options
const provider = createHttpProvider({
  url: 'https://starknet-mainnet.public.blastapi.io',
  timeout: 30000,
  retry: 3,
});
```

### mainnetProvider / sepoliaProvider

Convenience factories for public endpoints.

```typescript
const mainnet = mainnetProvider();
const sepolia = sepoliaProvider();
```

## HttpProvider

### Constructor

```typescript
new HttpProvider(options: HttpProviderOptions | string)
```

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `url` | `string` | required | JSON-RPC endpoint URL |
| `headers` | `Record<string, string>` | `{}` | Custom HTTP headers |
| `timeout` | `number` | `30000` | Request timeout (ms) |
| `retry` | `number` | `3` | Retry attempts |
| `retryDelay` | `number` | `1000` | Delay between retries (ms) |
| `batch` | `boolean \| BatchOptions` | `false` | Enable request batching |

### Methods

#### request

Make a raw JSON-RPC request.

```typescript
const blockNumber = await provider.request({
  method: 'starknet_blockNumber',
  params: [],
});
```

#### Typed RPC Methods

```typescript
// All return Response<T> = { result?: T, error?: RpcError }
await provider.starknet_blockNumber();
await provider.starknet_chainId();
await provider.starknet_call(call, blockId);
await provider.starknet_getStorageAt(address, key, blockId);
await provider.starknet_getNonce(blockId, address);
await provider.starknet_getClassHashAt(blockId, address);
await provider.starknet_getTransactionReceipt(txHash);
await provider.starknet_estimateFee(tx, simulationFlags, blockId);
```

### Events

```typescript
provider.on('connect', () => {});
provider.on('disconnect', () => {});
provider.on('error', (err) => {});
provider.removeListener('connect', handler);
```

## WebSocketProvider

### Constructor

```typescript
new WebSocketProvider(options: WebSocketProviderOptions)
```

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `url` | `string` | required | WebSocket endpoint URL |
| `reconnect` | `boolean` | `true` | Auto-reconnect on disconnect |
| `reconnectDelay` | `number` | `1000` | Reconnect delay (ms) |

### Methods

#### connect / disconnect

```typescript
await ws.connect();
ws.disconnect();
ws.isConnected(); // boolean
```

#### Subscriptions

```typescript
// Async generators for subscriptions
for await (const block of ws.subscribeNewHeads()) { ... }
for await (const event of ws.subscribeEvents(params)) { ... }
for await (const tx of ws.subscribeNewTransactions(params)) { ... }
for await (const receipt of ws.subscribeNewTransactionReceipts(params)) { ... }
```

#### getTransport

Access the underlying WebSocket transport.

```typescript
const transport = ws.getTransport();
```

## TypedProvider

Wraps any provider with full type inference for RPC methods.

```typescript
const http = createHttpProvider('https://...');
const typed = createTypedProvider(http);

// TypeScript infers return type
const block: number = await typed.request({
  method: 'starknet_blockNumber',
  params: [],
});
```

## Related

<CardGroup cols={2}>
  <Card title="HTTP Guide" icon="plug" href="/guides/provider/http">
    HTTP provider setup and usage.
  </Card>
  <Card title="WebSocket Guide" icon="bolt" href="/guides/provider/websocket">
    Real-time subscriptions.
  </Card>
</CardGroup>
