---
title: Data-First API
description: How Kundera's data-first design enables composition and tree-shaking.
---

Kundera follows a **data-first** API design where functions take the data they operate on as the first parameter. This enables function composition, piping, and optimal tree-shaking.

## The Pattern

```typescript
import { encodeCalldata, decodeCalldata, Felt } from 'kundera';

// Data-first: the calldata comes first
const encoded = encodeCalldata(calldata, abi);
const decoded = decodeCalldata(encoded, abi);

// Enables composition
const result = pipe(
  rawInput,
  (input) => parseInput(input),
  (calldata) => encodeCalldata(calldata, abi),
  (encoded) => sendTransaction(encoded),
);
```

## Why Data-First?

| Benefit | Description |
|---------|-------------|
| **Tree-Shaking** | Import only the functions you use |
| **Composition** | Easily pipe and compose operations |
| **Testability** | Pure functions are easy to test |
| **No Hidden State** | No global configuration or singletons |

<Warning>
## Avoid Method Chaining

Kundera intentionally avoids method chaining patterns like `account.send().wait()`. While convenient, chaining couples functionality and prevents tree-shaking.

```typescript
// Prefer this (tree-shakeable)
import { sendTransaction, waitForTransaction } from 'kundera';
const hash = await sendTransaction(account, tx);
const receipt = await waitForTransaction(provider, hash);

// Over this (not tree-shakeable)
const receipt = await account.send(tx).wait();
```
</Warning>

## Comparison with Other Patterns

| Pattern | Example | Tree-Shakeable |
|---------|---------|----------------|
| **Data-First** (Kundera) | `encodeCalldata(data, abi)` | Yes |
| **Options-Last** | `encode(abi, data)` | Yes |
| **Method Chaining** | `abi.encode(data)` | No |
| **Class Methods** | `new Encoder(abi).encode(data)` | No |

## Related

<CardGroup cols={2}>
  <Card title="Tree-Shakeable API" icon="tree" href="/concepts/tree-shakeable-api">
    Learn how data-first enables tree-shaking.
  </Card>
  <Card title="Error Handling" icon="triangle-exclamation" href="/concepts/error-handling">
    Understand the result/error pattern.
  </Card>
</CardGroup>
