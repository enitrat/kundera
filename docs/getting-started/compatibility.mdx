---
title: Compatibility
description: Runtime and ecosystem compatibility notes.
---

Kundera supports multiple JavaScript runtimes and environments. This page covers what works where.

## Runtime Support

| Runtime | Version | Crypto Backend | Status |
|---------|---------|----------------|--------|
| **Bun** | 1.0+ | Native FFI | Full support |
| **Node.js** | 18+ | Native (with ffi-napi) or WASM | Full support |
| **Browsers** | Modern (ES2020) | WASM only | Full support |
| **Deno** | 1.30+ | WASM only | Full support |
| **Cloudflare Workers** | - | WASM only | Partial (no WebSocket) |
| **Vercel Edge** | - | WASM only | Partial (no WebSocket) |

<Tip>
For maximum performance, use Bun with native FFI. For maximum portability, use WASM.
</Tip>

## Crypto Backend Selection

Kundera automatically selects the best available crypto backend:

```
1. Native FFI (Bun built-in, or Node with ffi-napi)
2. WASM (if loaded via loadWasmCrypto())
3. Error (no backend available)
```

```typescript
import { isNativeAvailable, isWasmLoaded } from 'kundera/crypto';

if (isNativeAvailable()) {
  console.log('Using native crypto');
} else if (isWasmLoaded()) {
  console.log('Using WASM crypto');
} else {
  console.log('No crypto backend!');
}
```

## Browser Requirements

| Feature | Required |
|---------|----------|
| WebAssembly | Yes |
| BigInt | Yes |
| Fetch API | Yes |
| WebSocket | For subscriptions |
| ES2020 | Yes |

### Bundle Size

| Import | Size (gzipped) |
|--------|----------------|
| Full library | ~50KB |
| Provider only | ~8KB |
| Primitives only | ~3KB |
| WASM module | ~150KB (loaded separately) |

## Node.js Specific

### ESM vs CommonJS

Kundera ships as ESM. For CommonJS projects:

```javascript
// CommonJS interop
const { createHttpProvider } = require('kundera/provider');
```

### Native Crypto in Node

Install `ffi-napi` for native performance:

```bash
npm install ffi-napi
```

<Warning>
`ffi-napi` requires native build tools. See [Native Crypto](/getting-started/native) for setup.
</Warning>

## Framework Integration

### React / Next.js

```typescript
// Load WASM in useEffect
useEffect(() => {
  loadWasmCrypto().then(() => setReady(true));
}, []);
```

### Vue / Nuxt

```typescript
// Load WASM in onMounted
onMounted(async () => {
  await loadWasmCrypto();
});
```

### Svelte / SvelteKit

```typescript
// Load WASM in onMount
onMount(async () => {
  await loadWasmCrypto();
});
```

## Bundler Configuration

### Vite

```typescript
// vite.config.ts
export default {
  optimizeDeps: {
    exclude: ['kundera'], // Prevent pre-bundling WASM
  },
};
```

### Webpack 5

```javascript
// webpack.config.js
module.exports = {
  experiments: {
    asyncWebAssembly: true,
  },
};
```

### esbuild

```bash
esbuild --bundle --format=esm --loader:.wasm=file
```

## Known Limitations

| Environment | Limitation |
|-------------|------------|
| Cloudflare Workers | No WebSocket subscriptions |
| Vercel Edge | No WebSocket subscriptions |
| React Native | Not tested; may require polyfills |
| Electron | Works; use Node backend for native crypto |

## Related

<CardGroup cols={2}>
  <Card title="Native Crypto" icon="bolt" href="/getting-started/native">
    Configure native crypto for Bun/Node.
  </Card>
  <Card title="WASM Crypto" icon="browser" href="/getting-started/wasm">
    Configure WASM crypto for browsers.
  </Card>
</CardGroup>
